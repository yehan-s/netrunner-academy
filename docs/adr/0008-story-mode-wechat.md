# ADR 0008：微信剧情模式与本地进度存储

## 状态

Accepted（已采纳，进行中）

## 背景

现有关卡偏“单点练习”，缺乏贯通多个知识点的长流程体验。用户希望增加一个独立的“剧情模式”，以微信对话的形式串联现实中常见的生产事故场景，让玩家在游戏中接收“同事/安全负责人”的消息，一步步排查问题。剧情模式不复用现有 case_XX，而是使用新的剧情关卡，且剧情进度需要在本地刷新后保留。

## 决策

- 在 Dock 中新增一个 “WeChat” 应用入口，点击后打开一个仿微信界面，不影响现有 Browser/Reqable/Docs 应用。
- 在微信界面中提供“剧情模式”会话，点击后进入剧情列表页，玩家可以选择一个剧情线，先看到简介，再确认开始。
- 剧情线使用独立的 `StoryThread` 数据结构，包含至少 10 个按时间顺序推进的对话消息（scene），全部属于新建剧情，不与现有 case_XX 绑定。
- 使用 `localStorage` 保存当前激活剧情 ID 和每条剧情的已读进度，刷新页面后自动恢复；在微信界面中提供“退出当前剧情”操作，清空本地状态。

## 影响

- 玩家可以在不影响原有训练关卡的前提下，体验一个基于现实事故模式的长流程剧情，且中途刷新或重开页面不会丢失进度。
- 微信剧情模式为后续新增更多“故事线”（如移动抓包、JS 逆向专项）提供统一的 UI 和状态管理基础。

